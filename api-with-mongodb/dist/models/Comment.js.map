{"version":3,"sources":["../../server/models/Comment.js"],"names":["Schema","Promise","global","commentSchema","text","type","String","required","isRemoved","Boolean","default","createDate","Date","now","_creator","ObjectId","ref","_post","autoPopulateCreator","next","populate","path","select","pre","Comment","model"],"mappings":";;;;;;AAAA;;;;;;IAEQA,M,sBAAAA,M;;;AAER,mBAASC,OAAT,GAAmBC,OAAOD,OAA1B;;AAEA,IAAME,gBAAgB,IAAIH,MAAJ,CAAW;AAChCI,OAAM;AACLC,QAAMC,MADD;AAELC,YAAU;AAFL,EAD0B;AAKhCC,YAAW;AACVH,QAAMI,OADI;AAEVC,WAAS;AAFC,EALqB;AAShCC,aAAY;AACXN,QAAMO,IADK;AAEXF,WAASE,KAAKC,GAAL;AAFE,EAToB;AAahCC,WAAU;AACTT,QAAML,OAAOe,QADJ;AAETC,OAAK;AAFI,EAbsB;AAiBhCC,QAAO;AACNZ,QAAML,OAAOe,QADP;AAENC,OAAK;AAFC;AAjByB,CAAX,CAAtB;;AAuBA,IAAME,sBAAsB,SAAtBA,mBAAsB,CAASC,IAAT,EAAe;AAC1C,MAAKC,QAAL,CAAc;AACbC,QAAM,UADO;AAEbC,UAAQ;AAFK,EAAd;AAIAH;AACA,CAND;;AAQAhB,cAAcoB,GAAd,CAAkB,MAAlB,EAA0BL,mBAA1B;;AAEA,IAAMM,UAAU,mBAASC,KAAT,CAAe,SAAf,EAA0BtB,aAA1B,CAAhB;kBACeqB,O","file":"Comment.js","sourcesContent":["import mongoose from 'mongoose';\n\nconst { Schema } = mongoose;\n\nmongoose.Promise = global.Promise;\n\nconst commentSchema = new Schema({\n\ttext: {\n\t\ttype: String,\n\t\trequired: true\n\t},\n\tisRemoved: {\n\t\ttype: Boolean,\n\t\tdefault: false\n\t},\n\tcreateDate: {\n\t\ttype: Date,\n\t\tdefault: Date.now()\n\t},\n\t_creator: {\n\t\ttype: Schema.ObjectId,\n\t\tref: 'User'\n\t},\n\t_post: {\n\t\ttype: Schema.ObjectId, \n\t\tref: 'Post'\n\t}\n});\n\nconst autoPopulateCreator = function(next) {\n\tthis.populate({\n\t\tpath: '_creator',\n\t\tselect: 'username createDate -_id'\n\t});\n\tnext();\n};\n\ncommentSchema.pre('find', autoPopulateCreator);\n\nconst Comment = mongoose.model('Comment', commentSchema);\nexport default Comment;"]}