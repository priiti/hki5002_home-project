{"version":3,"sources":["../../server/controllers/CommentController.js"],"names":["commentController","post","request","response","body","text","userId","postId","comment","Comment","_creator","_post","save","then","newComment","Post","findByIdAndUpdate","$push","_id","existingPost","status","json","success","data","catch","err","message"],"mappings":";;;;;;AAAA;;;;;;AAEA,IAAMA,oBAAoB,EAA1B;;AAEAA,kBAAkBC,IAAlB,GAAyB,UAACC,OAAD,EAAUC,QAAV,EAAuB;AAAA,qBAK3CD,QAAQE,IALmC;AAAA,KAE9CC,IAF8C,iBAE9CA,IAF8C;AAAA,KAG9CC,MAH8C,iBAG9CA,MAH8C;AAAA,KAI9CC,MAJ8C,iBAI9CA,MAJ8C;;AAO/C;;AACA,KAAMC,UAAU,IAAI,iBAAGC,OAAP,CAAe;AAC9BJ,QAAMA,IADwB;AAE9BK,YAAUJ,MAFoB;AAG9BK,SAAOJ;AAHuB,EAAf,CAAhB;AAKAC,SAAQI,IAAR,GAAeC,IAAf,CAAoB,UAACC,UAAD,EAAgB;AACnC,mBAAGC,IAAH,CAAQC,iBAAR,CACCT,MADD,EAEC,EAAEU,OAAO,EAAC,aAAaH,WAAWI,GAAzB,EAAT,EAFD,EAGEL,IAHF,CAGO,UAACM,YAAD,EAAkB;AACxBhB,YAASiB,MAAT,CAAgB,GAAhB,EAAqBC,IAArB,CAA0B;AACzBC,aAAS,IADgB;AAEzBC,UAAMT,UAFmB;AAGzBK;AAHyB,IAA1B;AAKA,GATD,EASGK,KATH,CASS,UAACC,GAAD,EAAS;AACjBtB,YAASiB,MAAT,CAAgB,GAAhB,EAAqBC,IAArB,CAA0B;AACzBK,aAASD;AADgB,IAA1B;AAGA,GAbD;AAcA,EAfD,EAeGD,KAfH,CAeS,UAACC,GAAD,EAAS;AACjBtB,WAASiB,MAAT,CAAgB,GAAhB,EAAqBC,IAArB,CAA0B;AACzBK,YAASD;AADgB,GAA1B;AAGA,EAnBD;AAoBA,CAjCD;;kBAmCezB,iB","file":"CommentController.js","sourcesContent":["import db from './../models';\n\nconst commentController = {};\n\ncommentController.post = (request, response) => {\n\tconst {\n\t\ttext,\n\t\tuserId,\n\t\tpostId\n\t} = request.body;\n\n\t// Validation\n\tconst comment = new db.Comment({\n\t\ttext: text,\n\t\t_creator: userId,\n\t\t_post: postId\n\t});\n\tcomment.save().then((newComment) => {\n\t\tdb.Post.findByIdAndUpdate(\n\t\t\tpostId,\n\t\t\t{ $push: {'_comments': newComment._id} }\n\t\t).then((existingPost) => {\n\t\t\tresponse.status(200).json({\n\t\t\t\tsuccess: true,\n\t\t\t\tdata: newComment,\n\t\t\t\texistingPost,\n\t\t\t});\n\t\t}).catch((err) => {\n\t\t\tresponse.status(500).json({\n\t\t\t\tmessage: err\n\t\t\t});\n\t\t});\n\t}).catch((err) => {\n\t\tresponse.status(500).json({\n\t\t\tmessage: err\n\t\t});\n\t});\n};\n\nexport default commentController;"]}